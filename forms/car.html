<script>
        const SUPABASE_URL = 'https://exbhxsdwqznmroxrzxjp.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV4Ymh4c2R3cXpubXJveHJ6eGpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxMDUzMzksImV4cCI6MjA4NzY4MTMzOX0.CUpzfJCrhghGNZKMK4xboXA7ZdSbYArWBSW4LpMevVk';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function sendCarApplication() {
            const saved = localStorage.getItem('gvr_user');
            if(!saved) return alert("Войдите в аккаунт!");
            const user = JSON.parse(saved);

            const brand = document.getElementById('car-brand').value;
            const model = document.getElementById('car-model').value;
            const year = document.getElementById('car-year').value;
            const plate = document.getElementById('car-plate').value;
            const photos = document.getElementById('car-photos').value;

            // ИСПРАВЛЕНО: Добавлены || между условиями
            if(!brand  !model  !plate) return alert("Заполните поля!");

            const { error } = await supabaseClient
                .from('applications')
                .insert([{ 
                    username: user.username, 
                    type: 'car', 
                    data: { brand, model, year, plate, photos },
                    status: 'pending' 
                }]);

            if (error) {
                alert("Ошибка: " + error.message);
            } else {
                alert("Заявка подана!");
                window.location.href = '../index.html';
            }
        }
    </script>
